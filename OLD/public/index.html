<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Bo-Pi | Welcome</title>
    <link rel="stylesheet" href="foundation/css/foundation.css">
    <script src="foundation/js/vendor/modernizr.js"></script>
    <script type="text/javascript" src="/js/socket.io.js"></script>
    <link rel="stylesheet" href="css/custom.css">
    <link rel="text/html" href="favicon.html">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
    <link rel="manifest" href="manifest.json">
</head>

<body>
   <div class="off-canvas-wrap" data-offcanvas>
  <div class="inner-wrap">
    <nav class="tab-bar">
      <section class="left-small">
        <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
      </section>

      <section class="middle tab-bar-section">
        <h1 class="title">Bo-Pi</h1>
      </section>

      <section class="right-small">
        <a class="right-off-canvas-toggle menu-icon" ><span></span></a>
      </section>
    </nav>

    <aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        <li><label>Settings</label></li>
        <!--<li class="has-submenu"><a href="#">Settings</a>
            <ul class="left-submenu">
                <li class="back"><a href="#">Back</a></li>
                <li><label>Level 1</label></li>
                <li><a href="settings.html">Link 1</a></li>
                <li class="has-submenu"><a href="#">Link 2 w/ submenu</a>
                    <ul class="left-submenu">
                        <li class="back"><a href="#">Back</a></li>
                        <li><label>Level 2</label></li>
                        <li><a href="#">...</a></li>
                    </ul>
                </li>
                <li><a href="#">...</a></li>
            </ul>
        </li>
        <li><a href="#">The Encyclopedists</a></li>
        <li><a href="#">The Mayors</a></li>
        <li><a href="#">The Traders</a></li>
        <li><a href="#">The Merchant Princes</a></li>
        -->
        
        <li>
	  <div class="row">
	    <div class="small-2 large-4 columns">
	         <i class="fa fa-refresh"></i>
	    </div>
            <div class="small-10 large-8 columns">
                     <div style=" vertical-align:middle;">
                      <input class="left inline" id="TLintervalVal" style="text-align:right; width:40px; margin-right:0rem;" type="text" placeholder="sec">
                        <a href="#" class="button postfix inline round" style="margin-left:40px;width:20px" onclick="setTLInterval()"></a>
                     </div>	     	     
	    </div>
	  </div>
	   
	  <div class="row">
	      <div class="small-2 large-4 columns">
		  <i class="fa fa-video-camera"></i> vf	  
		      
	      </div>
	      <div class="small-10 large-8 columns">
		  <div class="switch round small">
		      <input id="vf" type="checkbox" name="vfT">
			  <label for="vf"></label>
		      </div>
		  </div>
	  </div>
	 <br>
	  <div class="row">
	      <div class="small-2 large-4 columns">
		  <i class="fa fa-video-camera"></i> hf	  
		      
	      </div>
	      <div class="small-10 large-8 columns">
		  <div class="switch round small">
		      <input id="hf" type="checkbox" name="hfT">
			  <label for="hf"></label>
		      </div>
		  </div>
	  </div>
	  <div class="row">
	   
	      <div class="small-12 columns">
	    <a href="#" onclick="shutdown()" class="alert button round" style="color:red;"> <i class="fa fa-power-off"></i></a>
	      </div>
	  </div>
      </li>
      </ul>
    </aside>

    <aside class="right-off-canvas-menu">
      <ul class="off-canvas-list">
        <li><label>Commands</label></li>
       <!-- <li><a href="#">Hari Seldon</a></li>
        <li class="has-submenu"><a href="#">R. Giskard Reventlov</a>
            <ul class="right-submenu">
                <li class="back"><a href="#">Back</a></li>
                <li><label>Level 1</label></li>
                
                <li>
                
                </li>
                <li class="has-submenu"><a href="#">Link 2 w/ submenu</a>
                    <ul class="right-submenu">
                        <li class="back"><a href="#">Back</a></li>
                        <li><label>Level 2</label></li>
                        <li><a href="#">...</a></li>
                    </ul>
                </li>
                <li><a href="#">...</a></li>
            </ul>
        </li>-->
        <li>
                <div class="row" style="float:center; vertical-align:middle;" >
                    <div class="small-6 columns">
                      
                      <a href="#" onclick="takeSnapshot()" class="button round"> <i class="fa fa-picture-o  fa-2x"></i></a>


                    </div>
                               <div class="small-3 columns">
                    &nbsp;
                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    </div>
                    
               </div>          
               </li>
      </ul>
    </aside>

    <section class="main-section">
      <!-- content goes here -->
   <div class="row">
    <!--
        <div class="large-3 columns">
          <h1><img src="http://placehold.it/400x100&text=Logo"/></h1>
        </div>
        <div class="large-9 columns">
          <ul class="right button-group">
          <li><a href="#" class="button">Link 1</a></li>
          <li><a href="#" class="button">Link 2</a></li>
          <li><a href="#" class="button">Link 3</a></li>
          <li><a href="#" class="button">Link 4</a></li>
          </ul>
         </div>
       </div>
      
      <div class="row">
        <div class="large-12 columns">
        <div id="slider">
          <img src="http://placehold.it/1000x400&text=[ img 1 ]"/>
        </div>
        
        <hr/>
        </div>
      </div>
      
     -->   
     
     
      <div class="row">
        <div class="large-4 columns">
           <iframe id="videoFeed" src="default.html" width="330" height="250" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
        </div>
        
        <div class="large-4 columns">
            <iframe id="camControl" src="default.html" width="280" height="280" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
            <a href="#" class="button tiny round" style="bottom: +20px;" onclick="takeSnapshot()"><i class="fa fa-picture-o fa-2x"></i></a>
        </div>
        
        <div class="large-4 columns">
               <!-- Begin of commands -->
              <!-- <div class="row">
                    <div class="small-6 columns">
                    
                    <h5 class="left">
		      <i class="fa fa-clock-o fa-2x"></i>
                    </h5>
                     <div class="switch round small right"><input id="TLStart" type="checkbox" onclick="TLStart(this)"><label for="TLStart"></label></div>

                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    
                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    </div>
               </div>
              -->  
                
               <!--   <div class="row">
                 <div class="small-6 columns">
                     <h5 class="left">
                        <i class="fa fa-refresh fa-2x"></i>
                    </h5>
                     <div style="float:right; vertical-align:middle;">
                      <input class="left" id="TLintervalVal" style="text-align:right; width:40px; margin-right:0rem;" type="text" placeholder="sec">
                        <a href="#" class="button postfix inline round" style="width:20px" onclick="setTLInterval()"></a>
                     </div>
                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    </div>
               </div> -->
                    
                
               <div class="row">
                    <div class="small-6 columns">
                      <i class="fa fa-video-camera  fa-2x"></i>
                      <div class="switch round small right"><input id="Video" type="checkbox" onclick="VideoF(this)"><label for="Video"></label></div>
                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    </div>
                    
                    <div class="small-3 columns">
                    &nbsp;
                    </div>
               </div>  
               
               <!-- End of commands -->      
        </div>
         
         
         <div class="row">
            <div class="small-12 columns">
            
             <ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
                <li><span class="labelSwitch">
                    <i class="fa fa-terminal"></i>
                </span>
                <span class="labelSwitch" id="CMD">last command</span></li>
                <li><span class="labelSwitch">
                    <i class="fa fa-folder-open"></i>
                </span>
                <span class="labelSwitch" id="Folder">Folder</span>
               
                </li>
                <li><span class="labelSwitch">
                    <i class="fa fa-info-circle"></i>
                </span>
                <span class="labelSwitch" id="Info">Info</span></li>
               </ul>
            </div>
         </div>
       
 
     </section>

  <a class="exit-off-canvas"></a>

  </div>
</div>
       
    
    
    
    
    
    
    <script>
	var port = "999";
	var videoFeedPort = "9000";
	var socket = io();
	var status = 0;

	function VideoF(element) {
	    var status = 0;
	  if (element.checked == true) {
		socket.emit('Video', "cameraON.sh");
		status =1;
		//document.getElementById('videoFeed').contentWindow.location.reload(true);
	  } else {
		socket.emit('Video', "cameraOFF.sh");
		status =0;
		}
	    if (status == 1){
	     setTimeout(camFeedRefresh, 1000);
	     }
	     else
	     {
	     setTimeout(camOFF, 1000);
	
	     }
	}
	
	function camFeedRefresh(){
	    document.getElementById('videoFeed').src = 	document.getElementById("videoFeed").src = 'http://' + server + ':' + videoFeedPort + '/javascript_simple.html';
	
	}
	
	function camOFF(){
	   document.getElementById('videoFeed').src = "default.html";
	 
	}
	
	
	
	function takeSnapshot(element) {
	  socket.emit('takeSnapShot');	
	}
	
	function shutdown(element) {
	  socket.emit('shutDown');	
	}
	
	function TLStart(element) {

	    if (element.checked == true) {
		socket.emit('TLStart');
		document.getElementById('videoFeed').src = document.getElementById('videoFeed').src;

	    } else {
		socket.emit('TLStop');
	    }
	}


	function setTLInterval() {
	    socket.emit('TLInterval', document.getElementById("TLintervalVal").value);
	}

	socket.on('Info', function(CMD) {
	    document.getElementById("Info").innerHTML = CMD;
	});
	
      
	socket.on('Folder', function(CMD) {
	    document.getElementById("Folder").innerHTML = CMD;
	});

	socket.on('CMD', function(CMD) {
	    document.getElementById("CMD").innerHTML = CMD;
	});

	socket.on('connected', function(info) {
	  document.getElementById("Info").innerHTML = info;
	});
      
	socket.on('serverADDR', function(ADDR) {
		server = ADDR.toString();
		document.getElementById("videoFeed").src = 'http://' + server + ':' + videoFeedPort + '/javascript_simple.html';
		document.getElementById("camControl").src = 'http://' + server + ':' + port + '/vj';
		
	}); 
    </script>

    
    <script src="./foundation/js/vendor/jquery.js"></script>
    <script src="./foundation/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
    <script>
    
 function hideAddressBar()
{
  if(!window.location.hash)
  {
      if(document.height < window.outerHeight)
      {
          document.body.style.height = (window.outerHeight + 50) + 'px';
      }

      setTimeout( function(){ window.scrollTo(0, 1); }, 50 );
  }
}

window.addEventListener("load", function(){ if(!window.pageYOffset){ hideAddressBar(); } } );
window.addEventListener("orientationchange", hideAddressBar );
</script>
    
</body>

</html>